<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Ficdown</title><link rel="stylesheet" href="/ficdown.css"></head><body><header><div><h1>Ficdown</h1></div><nav><ul><li><a href="#story">Story</a></li><li><a href="#scenes">Scenes</a></li><li><a href="#cond-scenes">Conditional Scenes</a></li><li><a href="#first-seen">First Seen</a></li><li><a href="#actions">Actions</a></li><li><a href="#anchors">Anchors</a></li><li><a href="#targets">Targets</a></li><li><a href="#toggles">Toggles</a></li><li><a href="#conditionals">Conditionals</a></li><li><a href="#normalization">Normalization</a></li><li><a href="#player-state">Player State</a></li></ul><a name="story"></a><h2>Story</h2><p>A story block is defined by a level-one header. The story title must be an <a href='#anchors'>anchor</a> that links to the first <a href='#scenes'>scene</a>. The anchor must not contain <a href='#conditionals'>conditionals</a> or <a href='#toggles'>toggles</a>.</p><p>The text of the story block will be the first thing displayed to the player.</p><code><pre># [Awesome Game](/first-scene)

Welcome to Awesome Game by *Some Author*.
</pre></code><a name="scenes"></a><h2>Scenes</h2><p>Scenes are defined by level-two headers. Scene descriptions can contain <a href='#first-seen'>first-seen</a> blocks and <a href='#anchors'>anchors</a> to change the description based on <a href='#player-state'>player state</a> or link to other scenes.</p><p>To display scene title text that is different from the scene name, you can wrap the scene's name in an anchor and specify the display text as the anchor's title.</p><code><pre>## First Scene

This is the text displayed to the player when they visit this scene.

## [Second Scene]("Second Scene Title")

This is the second scene with a different display title specified.
</pre></code><a name="cond-scenes"></a><h2>Conditional Scenes</h2><p><a href='#scenes'>Scene</a> names can be <a href='#anchors'>anchors</a> that specify <a href='#player-state'>player state</a> conditions that must be met to enter that scene. The anchor must not contain a <a href='#targets'>target</a> or <a href='#toggles'>toggles</a>. If multiple scenes with the same name are defined, the player will only see a scene for which their current state satisfies all of the specified <a href='#conditionals'>conditionals</a>. If the player's state satisfies more than one scene's conditionals, they will see the one that has the most variables. If two scenes are satisfied with the same number of variables, the player will see the one that was defined first in the story file.</p><p>If only conditional scenes are defined and it is possible to be linked to that scene with a player state that does not satisfy any of them, this is considered an error in the story file. The safest way to avoid this is to always have a non-conditional version of the scene to fall back on when none of the conditional versions are satisfied.</p><code><pre>## My Scene

This is the default scene that the player will see if none of the conditional versions are satisfied.

## [My Scene](?state-one)

The player will see this if their `state-one` variable has been toggled, but not if `state-two` has also been toggled because that matches a more specific conditional scene below.

## [My Scene](?state-one&state-two "Alternate Scene Title")

The player will see this if both `state-one` and `state-two` have been toggled.
</pre></code><a name="first-seen"></a><h2>First Seen</h2><p>Description text inside blockquotes will only be displayed to a player the first time they enter that <a href='#scenes'>scene</a>.</p><code><pre>## My Scene

> This text will only display to the player once.

This text will display to the player every time they enter the scene.

> This text will also only be displayed to the player once.
</pre></code><a name="actions"></a><h2>Actions</h2><p>Actions are defined by level-three headers. When a state variable is <a href='#toggles'>toggled</a> that has a matching action defined, the action's description will be prepended to the next <a href='#scenes'>scene</a> description that the player sees. Action names must not themselves be <a href='#anchors'>anchors</a>. Anchors can be used within the action description to change text based on <a href='#player-state'>player state</a>.</p><p>Actions are matched to state variables based on their <a href='#normalization'>normalized</a> name.</p><p>Actions will be triggered by a toggle for variables even if that variable has been toggled before.</p><p>The first time an action is triggered, the toggled variable will be false within the action itself. In subsequent triggerings, the variable will be true. This can be used to differentiate the first time an action is shown.</p><code><pre>### My State

This text will be displayed to the player whenever they toggle `my-state`. This is [not](?my-state) the first time the action was triggered.
</pre></code><a name="anchors"></a><h2>Anchors</h2><p>Anchors are used within <a href='#scenes'>scene</a> descriptions to link players to other scenes in the story, and to change the description text based on the <a href='#player-state'>player state</a>.</p><p>Anchors with a <a href='#targets'>target</a> or <a href='#toggles'>toggles</a> will be rendered to the player as a clickable link. Anchors with only <a href='#conditionals'>conditionals</a> will be rendered as normal text.</p><p>Anchors can contain any number of conditionals and toggles, but can contain at most one target.</p><p>Anchor text cannot contain other anchors. For more more complex modification of scene descriptions you should use <a href='#cond-scenes'>conditional scenes</a> instead.</p><code><pre>[Text to display when conditions are met|Text to display when conditions are not met](/target-scene?conditional-one&conditional-two#toggle-one+toggle-two)</pre></code><a name="targets"></a><h2>Targets</h2><p>The target in an <a href='#anchors'>anchor</a> always comes first and is preceeded by a slash "/" character. The target should be the <a href='#normalization'>normalized</a> name of the <a href='#scenes'>scene</a> it links to. Anchors with a target will be rendered as a clickable link to the player. When they click the link, they will move to the scene specified by the target.</p><p>Anchors can have at most one target.</p><code><pre>[Go To Scene Two](/scene-two)</pre></code><a name="toggles"></a><h2>Toggles</h2><p>Toggles are used in <a href='#anchors'>anchors</a> to set <a href='#player-state'>player state</a> variables to true, and to trigger <a href='#actions'>actions</a>. They are preceeded in an anchor's link with a hash "#". Multiple toggles can be delimited by a plus "+" character. They always appear at the end of the link, after the <a href='#targets'>target</a> and <a href='#conditionals'>conditionals</a>.</p><p>Anchors with toggles will always be rendered as clickable links. If the anchor does not have a target, clicking the link will toggle the variables and then redirect the player back to the current <a href='#scenes'>scene</a>.</p><code><pre>[Toggle my variables](#toggle-one+toggle-two)</pre></code><a name="conditionals"></a><h2>Conditionals</h2><p>Conditionals are specified in an <a href='#anchors'>anchor's</a> link between the <a href='#targets'>target</a> and the <a href='#toggles'>toggles</a>. They are preceeded by a question mark "?" and delimited by ampersands "&amp;". They are used to hide or change the displayed text based on the current <a href='#player-state'>player state</a>. Conditionals are specified as the name of the variable to test for a true value, or the name of the variable preceeded by an exclamation mark "!" to test for a false value.</p><p>If the anchor's text contains a pipe character "|" then the text to the left of the pipe will be displayed if the current player state satisfies all of the conditionals, and the text to the right of the pipe will be displayed if the current player state does not satisfy all of the conditionals. Anchor text with no pipe will be hidden entirely if the player state does not satisfy the conditionals, and anchor text with nothing to the left of the pipe will be hidden if the player state does satisfy the conditionals.</p><p>Anchors with only conditionals and no target or toggles will not be rendered as a clickable link. These can be used to easily change a <a href='#scenes'>scene's</a> description based on player state.</p><code><pre>## My Scene

The last word of this paragraph will change based on the player's state. The `my-state` variable is [true|false](?my-state).

This is some text that will change depending on the state of several variables: [All true|Not all true](?my-state&my-state-two&my-state-three).

This is some text that will change depending on more complicated rules that check for both true and false values: [Satisfied|Not satisfied](?my-state&!my-state-two&!my-state-three).

The links at the end of this description will also change based on the player's state.

[This choice will always appear](/first-choice)

[This choice only appears if my-state is true](/second-choice?my-state)

[This choice only appears if another-state is false](/third-choice?!another-state)

[The text of this choice changes depending on the value of my-state|But it will always appear](/fourth-choice?my-state)
</pre></code><a name="normalization"></a><h2>Normalization</h2><p><a href='#scenes'>Scene</a> and <a href='#actions'>action</a> names are normalized by removing all non-alphanumeric characters, converting everything to lower case, then replacing spaces with dashes. Some examples:</p><ul><li>"Scene" would become "scene"</li><li>"My Scene" would become "my-scene"</li><li>"Big Bob's House" would become "big-bobs-house"</li><li>"Apartment/Room 123" would become "apartmentroom-123"</li></ul><p>Normalization is applied to scene names when used as the <a href='#targets'>target</a> in <a href='#anchors'>anchors</a>, and to action names when triggered by <a href='#toggles'>toggles</a>.</p><a name="player-state"></a><h2>Player State</h2><p>Player state is a collection of boolean variables that are assigned to your game's player and tracked throughout their playthrough of your game. All player state variables start off false. The variables are set to true when a player clicks a link that contains that variable as a <a href='#toggles'>toggle</a>. Once toggled, a state variable will be true for the remainder of the playthrough (it cannot be reset to false).</p><p>It is not necessary to declare variables anywhere in your story other than where you use them in your story's <a href='#anchors'>anchors</a>.</p><p>Variables are used in <a href='#conditionals'>conditional</a> anchors to change the text displayed or hide them entirely.</p><p>Conditional anchors wrapped around <a href='#scenes'>scene</a> names are used to define <a href='#cond-scenes'>conditional scenes</a>.</p><p>When using the ficdown.exe tool to compile your story to HTML or epub format, you can pass the --debug flag which will output player state information at the bottom of every page in your story. This can be useful to track down misbehaving links or stories that don't behave the way you expected them to.</p></article><footer><div>Please direct all questions and comments to <a href="m&#97;il&#116;o&#58;%72%&#55;5di%&#55;&#51;%&#52;0&#115;&#105;t&#111;&#115;&#105;s&#46;co&#109;">&#114;udis&#64;sit&#111;sis&#46;c&#111;m</a>, or leave bug reports on the <a href='/source'>project code repositories</a> on Github.</div></footer><!-- Piwik--><script>var _paq = _paq || [];
_paq.push(['trackPageView']);
_paq.push(['enableLinkTracking']);
(function() {
  var u="//stats.sitosis.com/";
  _paq.push(['setTrackerUrl', u+'piwik.php']);
  _paq.push(['setSiteId', 7]);
  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
  g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
})();</script><noscript><img src="//stats.sitosis.com/piwik.php?idsite=7" style="border:0;" alt=""></noscript><!-- End Piwik Code--></body></html>